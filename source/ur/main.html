<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <title> - Engineering Computing Companion Website</title>
    <!-- <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css"/> -->
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"/>
<link rel="stylesheet" href="/assets/css/style.css"/>
<link rel="stylesheet" href="/assets/css/pygments.css"/>
<script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/font-awesome.min.css"> -->
<!-- <link href="/assets/css/fa/brands.min.css" rel="stylesheet"> -->
<!-- <link href="/assets/css/fa/solid.min.css" rel="stylesheet"> -->
<link href="/assets/css/fa/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pseudocode@latest/build/pseudocode.min.css">
<!-- <script src="/assets/js/pseudocode/build/pseudocode.js">
</script> -->
<!-- <script src="/assets/js/pseudocode/build/pseudocode.css"> -->
  </head>
  <body>
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
      <!-- <div class="mdl-layout--fixed-header mdl-layout__header--scroll"> -->
  <header class="mdl-layout__header">
    <div class="mdl-layout__header-row">
      <span class="mdl-layout-title">
        <a href="/">Engineering Computing Companion Website</a>
      </span>
      <div class="mdl-layout-spacer mdl-layout--large-screen-only"></div>
      <nav class="mdl-navigation mdl-layout--large-screen-only">
        
      </nav>
    </div>
  </header>
  <div class="mdl-layout__drawer">
    <span class="mdl-layout-title">Engineering Computing</span>
    <nav class="mdl-navigation">
      <div class="nav">
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
            
            <a class="nav-cha" href="/wb">1 Introduction</a>
          
          
          
        
          
          
            
              <div class="nav-sec-div">
              
            
            <a class="nav-sec" href="/mk">1.1 Engineering Computing</a>
          
          
        
          
          
          
        
          
          
            
            <a class="nav-sec" href="/fk">1.2 Computer Architecture {[}Outlined{]}</a>
          
          
        
          
          
            
            <a class="nav-sec" href="/gj">1.3 Programming Computers {[}Outlined{]}</a>
          
          
        
          
          
            
            <a class="nav-sec" href="/89">1.4 The Development System</a>
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
            
            <a class="nav-sec" href="/c0">1.5 Basic Elements of a Program</a>
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
            
            <a class="nav-sec" href="/kx">1.6 Lists</a>
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
            
            <a class="nav-sec" href="/rq">1.7 Tuples and Ranges</a>
          
          
        
          
          
            
            <a class="nav-sec" href="/ow">1.8 Dictionaries</a>
          
          
        
          
          
          
        
          
          
            
            <a class="nav-sec" href="/v3">1.9 Functions</a>
          
          
        
          
          
            
            <a class="nav-sec" href="/cl">1.10 Branching</a>
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
            
            <a class="nav-sec" href="/ix">1.11 Looping</a>
          
          
        
          
          
            
            <a class="nav-sec" href="/6c">1.12 Summary {[}Outlined{]}</a>
          
          
        
          
          
            
            <a class="nav-sec" href="/6e">1.13 Problems</a>
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
            
              </div>
              
            
            <a class="nav-cha" href="/xq">2 The Structure, Style, and Design of Programs</a>
          
          
          
        
          
          
            
              <div class="nav-sec-div">
              
            
            <a class="nav-sec" href="/rz">2.1 Python Interpreters and Interactive Sessions</a>
          
          
        
          
          
            
            <a class="nav-sec" href="/v9">2.2 Scripts, Modules, and Imports</a>
          
          
        
          
          
            
            <a class="nav-sec" href="/tq">2.3 The Python Standard Library and Packages</a>
          
          
        
          
          
          
        
          
          
            
            <a class="nav-sec" href="/yz">2.4 Namespaces, Scopes, and Contexts</a>
          
          
        
          
          
          
        
          
          
            
            <a class="nav-sec" href="/rf">2.5 Defining Classes</a>
          
          
        
          
          
          
        
          
          
            
            <a class="nav-sec" href="/l4">2.6 Style Conventions</a>
          
          
        
          
          
          
        
          
          
          
        
          
          
            
            <a class="nav-sec" href="/mw">2.7 The Design of Programs</a>
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
            
            <a class="nav-sec" href="/vl">2.8 Problems</a>
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
            
              </div>
              
            
            <a class="nav-cha" href="/r3">3 Numerical Representations, Input and Output, and Graphics</a>
          
          
          
        
          
          
          
        
          
          
            
              <div class="nav-sec-div">
              
            
            <a class="nav-sec" href="/wa">3.1 Arrays</a>
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
            
            <a class="nav-sec" href="/84">3.2 Manipulating, Operating On, and Mapping Over Arrays</a>
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
            
            <a class="nav-sec" href="/j4">3.3 Input and Output</a>
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
            
            <a class="nav-sec" href="/sy">3.4 Introducing Graphics</a>
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
            
            <a class="nav-sec" href="/a5">3.5 Problems</a>
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
            
              </div>
              
            
            <a class="nav-cha" href="/we">4 Symbolic Analysis and Design</a>
          
          
          
        
          
          
            
              <div class="nav-sec-div">
              
            
            <a class="nav-sec" href="/ya">4.1 Symbolic Expressions, Variables, and Functions</a>
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
            
            <a class="nav-sec" href="/nc">4.2 Manipulating Symbolic Expressions</a>
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
            
            <a class="nav-sec" href="/4u">4.3 Solving Equations Algebraically</a>
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
            
            <a class="nav-sec" href="/ur">4.4 From Symbolics to Numerics</a>
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
            
            <a class="nav-sec" href="/rd">4.5 Vectors and Matrices</a>
          
          
        
          
          
            
            <a class="nav-sec" href="/iu">4.6 Calculus</a>
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
            
            <a class="nav-sec" href="/j1">4.7 Solving Ordinary Differential Equations</a>
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
            
            <a class="nav-sec" href="/kb">4.8 Problems</a>
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
            
              </div>
              
            
            <a class="nav-cha" href="/dx">5 Numerical Analysis and Design Techniques [Outlined]</a>
          
          
          
        
          
          
            
              <div class="nav-sec-div">
              
            
            <a class="nav-sec" href="/1y">5.1 Sets of Linear Algebraic Equations</a>
          
          
        
          
          
            
            <a class="nav-sec" href="/h6">5.2 Nonlinear Sets of Algebraic Equations via Newton-Raphson</a>
          
          
        
          
          
            
            <a class="nav-sec" href="/9k">5.3 Nonlinear Sets of Algebraic Equations via Packages</a>
          
          
        
          
          
            
            <a class="nav-sec" href="/y3">5.4 Integration</a>
          
          
        
          
          
            
            <a class="nav-sec" href="/nj">5.5 Sets of Differential Equations</a>
          
          
        
          
          
            
            <a class="nav-sec" href="/g8">5.6 Optimization via Gradient Descent</a>
          
          
        
          
          
            
            <a class="nav-sec" href="/cq">5.7 Summary {[}Outlined{]}</a>
          
          
        
          
          
            
            <a class="nav-sec" href="/mz">5.8 Problems</a>
          
          
        
          
          
          
        
          
            
              </div>
              
            
            <a class="nav-cha" href="/ht">6 Engineering Computing for Design [Incomplete]</a>
          
          
          
        
          
          
            
              <div class="nav-sec-div">
              
            
            <a class="nav-sec" href="/qu">6.1 Design as Optimization</a>
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
            
            <a class="nav-sec" href="/n8">6.2 Representing Design Constraints</a>
          
          
        
          
          
            
            <a class="nav-sec" href="/uf">6.3 Representing Design Problems</a>
          
          
        
          
          
            
            <a class="nav-sec" href="/rt">6.4 Solving Design Problems</a>
          
          
        
          
          
            
            <a class="nav-sec" href="/1d">6.5 Problems</a>
          
          
        
          
          
          
        
          
            
              </div>
              
            
            <a class="nav-cha" href="/ck">A Notebooks [Outlined]</a>
          
          
          
        
          
            
            <a class="nav-cha" href="/av">B Documenting and Presenting Programs [Outlined]</a>
          
          
          
        
          
            
            <a class="nav-cha" href="/vc">C Version Control [Outlined]</a>
          
          
          
        
          
            
            <a class="nav-cha" href="/ry">D Lists of Figures and Tables</a>
          
          
          
        
          
          
            
              <div class="nav-sec-div">
              
            
            <a class="nav-sec" href="/qj">D.1 List of figures</a>
          
          
        
          
          
            
            <a class="nav-sec" href="/9l">D.2 List of tables</a>
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
          
          
          
        
        
          </div>
        
      </div>
    </nav>
  </div>
<!-- </div> -->

      <div class="dropdown-container">
        <div class="dropdown v">
          <button id="vmenu" class="dropbtn vd">v ▾</button>
          <div class="dropdown-content vd">
            <!-- <a id="v1" data-title="Spyder" onclick="set_v('v1')" href=#>v1 <span>Spyder</span></a> -->
<!-- <a id="v2" data-title="VS Code" onclick="set_v('v2')" href=#>v2 <span>VS Code</span></a> -->
<a id="v1" data-title="VS Code" onclick="set_v('v1')" href=#>v1 <span>VS Code</span></a>
          </div>
        </div>
        <!-- <div class="dropdown dsd">
          <button id="dsmenu" class="dropbtn dsd">DX▾</button>
          <div class="dropdown-content dsd">
            <a id="miD1" data-title="Spyder Python development system" onclick="set_v_ds('D1')" href=#>D1 <span>Spyder Python development system</span></a>

          </div>
        </div> -->
        <div class="dropdown">
          <button id="menu" class="dropbtn">Links▾</button>
          <div class="dropdown-content">
  <a href="/index.html">Home</a>
</div>
        </div>
      </div>
      <main class="mdl-layout__content">
        <div class="mdl-grid page-container">
  <div class="mdl-card mdl-cell--12-col mdl-shadow--4dp">
    <div class="mdl-card__supporting-text">
      <!-- <div class="section-titles"> -->
        <!-- <div class="section-title"> -->
          <!-- <h1> -->
            <!--  -->
          <!-- </h1> -->
        <!-- </div> -->
      <!-- </div> -->
      <p>An engineering analysis typically requires that a symbolic solution be applied via the substitution of numbers into a symbolic expression.
In [kn]{.hashref}, we considered how to subsitute numerical values into expressions using SymPy’s <code class="language-plaintext highlighter-rouge">evalf()</code>{.py} method.
This is fine for a single value, but frequently an expression is to be evaluated at an array of numerical values.
Looping through the array and applying <code class="language-plaintext highlighter-rouge">evalf()</code>{.py} is cumbersome and computationally slow.
An easier and computationally efficient technique using the <code class="language-plaintext highlighter-rouge">sp.lambdify()</code>{.py} function is introduced in this section.
The function <code class="language-plaintext highlighter-rouge">sp.lambdify()</code>{.py} creates an efficient, numerically evaluable function from a SymPy expression.
The basic usage of the function is as follows:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="n">sp</span><span class="p">.</span><span class="n">symbols</span><span class="p">(</span><span class="s">"x"</span><span class="p">,</span> <span class="n">real</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">expr</span> <span class="o">=</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">7</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">sp</span><span class="p">.</span><span class="n">lambdify</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">expr</span><span class="p">)</span>
<span class="n">f</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</code></pre></div></div>

<p>::: {.output .execute_result execution_count=”2”}
    11
:::</p>

<p>By default, if NumPy is present, <code class="language-plaintext highlighter-rouge">sp.lambdify()</code>{.py} vectorizes the function such that the function can be provided with NumPy array arguments and return NumPy array values.
However, it is best to avoid relying on the function’s implicit behavior, which can change when different modules are present, it is best to provide the numerical module explicitly, as follows:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">f</span> <span class="o">=</span> <span class="n">sp</span><span class="p">.</span><span class="n">lambdify</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">expr</span><span class="p">,</span> <span class="n">modules</span><span class="o">=</span><span class="s">"numpy"</span><span class="p">)</span>
<span class="n">f</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">3.5</span><span class="p">]))</span>
</code></pre></div></div>

<p>::: {.output .execute_result execution_count=”3”}
    array([ 8.  , 11.  , 19.25])
:::</p>

<p>Multiple arguments are supported, as in the following example:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">sp</span><span class="p">.</span><span class="n">symbols</span><span class="p">(</span><span class="s">"x, y"</span><span class="p">,</span> <span class="n">real</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">expr</span> <span class="o">=</span> <span class="n">sp</span><span class="p">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="n">sp</span><span class="p">.</span><span class="n">sin</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">sp</span><span class="p">.</span><span class="n">lambdify</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">],</span> <span class="n">expr</span><span class="p">,</span> <span class="n">modules</span><span class="o">=</span><span class="s">"numpy"</span><span class="p">)</span>
<span class="n">f</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</code></pre></div></div>

<p>::: {.output .execute_result execution_count=”4”}
    0.7492287917633428
:::</p>

<p>\noindent
All the usual NumPy broadcasting rules will apply for the function.
For instance,</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">]])</span>  <span class="c1"># 2x1 matrix
</span><span class="n">Y</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]])</span>  <span class="c1"># 1x3 matrix
</span><span class="n">f</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">)</span>
</code></pre></div></div>

<p>::: {.output .execute_result execution_count=”5”}
    array([[ 0.45464871,  0.4912955 ,  0.07624747],
           [-0.35017549, -0.37840125, -0.05872664]])
:::</p>

<p>::: {.example h=”5j”}</p>

<p>You are designing the circuit shown in [@fig:ur-circuit].
Treat the source voltage $V_S$, the source resistance $R_S$, and the overall circuit topology as known constants.
The circuit design requires the selection of resistances $R_1$, $R_2$, and $R_3$ such that the voltage across $R_3$, $v_{R_3} = V_{R_3}$, and the current through $R_1$, $i_{R_1} = I_{R_1}$, where $V_{R_3}$ and $I_{R_1}$ are known constants (i.e., design requirements).
Proceed through the following steps:</p>

<p>#. Solve for all the resistor voltages $v_{R_k}$ and currents $i_{R_k}$ in terms of known constants and $R_1$, $R_2$, and $R_3$ using circuit laws
#. Apply the constraints $v_{R_3} = V_{R_3}$ and $i_{R_1} = I_{R_1}$ to obtain two equations relating $R_1$, $R_2$, and $R_3$
#. Solve for $R_2$ and $R_3$ as functions of $R_1$ and known constants
#. Create a design graph for the selection of $R_1$, $R_2$, and $R_3$ given the following design parameters: $V_S = 10$ V, $R_S = 50$ $\Omega$, $V_{R_3} = 1$ V, and $I_{R_1} = 20$ mA.</p>

<p><img src="figures/ur-circuit/ur-circuit" alt="A resistor circuit design for [5j]{.hashref}." />{#fig:ur-circuit .figure .standalone .nofloat}</p>

<p>::: {.example-solution}</p>

<h3 id="solve-for-the-resistor-voltages-and-currents--">Solve for the Resistor Voltages and Currents {-}</h3>

<p>Each resistor has an unknown voltage and current.
We will develop and solve a system of equations using circuit laws.
Begin by defining symbolic variables as follows:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">v_RS</span><span class="p">,</span> <span class="n">i_RS</span><span class="p">,</span> <span class="n">v_R1</span><span class="p">,</span> <span class="n">i_R1</span><span class="p">,</span> <span class="n">v_R2</span><span class="p">,</span> <span class="n">i_R2</span><span class="p">,</span> <span class="n">v_R3</span><span class="p">,</span> <span class="n">i_R3</span> <span class="o">=</span> <span class="n">sp</span><span class="p">.</span><span class="n">symbols</span><span class="p">(</span>
	<span class="s">"v_RS, i_RS, v_R1, i_R1, v_R2, i_R2, v_R3, i_R3"</span><span class="p">,</span> <span class="n">real</span><span class="o">=</span><span class="bp">True</span>
<span class="p">)</span>
<span class="n">viR_vars</span> <span class="o">=</span> <span class="p">[</span><span class="n">v_RS</span><span class="p">,</span> <span class="n">i_RS</span><span class="p">,</span> <span class="n">v_R1</span><span class="p">,</span> <span class="n">i_R1</span><span class="p">,</span> <span class="n">v_R2</span><span class="p">,</span> <span class="n">i_R2</span><span class="p">,</span> <span class="n">v_R3</span><span class="p">,</span> <span class="n">i_R3</span><span class="p">]</span>
<span class="n">R1</span><span class="p">,</span> <span class="n">R2</span><span class="p">,</span> <span class="n">R3</span> <span class="o">=</span> <span class="n">sp</span><span class="p">.</span><span class="n">symbols</span><span class="p">(</span><span class="s">"R1, R2, R3"</span><span class="p">,</span> <span class="n">positive</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">V_S</span><span class="p">,</span> <span class="n">R_S</span><span class="p">,</span> <span class="n">V_R3</span><span class="p">,</span> <span class="n">I_R1</span> <span class="o">=</span> <span class="n">sp</span><span class="p">.</span><span class="n">symbols</span><span class="p">(</span><span class="s">"V_S, R_S, V_R3, I_R1"</span><span class="p">,</span> <span class="n">real</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div></div>

<p>There are $4$ resistors, so there are $2\cdot 4 = 8$ unknown voltages and currents;
therefore, we need $8$ independent equations.
The first circuit law we apply is Ohm’s law, which states that the ratio of voltage over current for a resistor is approximately constant.
Applying this to each resistor, we obtain the following $4$ equations:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Ohms_law</span> <span class="o">=</span> <span class="p">[</span>
	<span class="n">v_RS</span> <span class="o">-</span> <span class="n">R_S</span><span class="o">*</span><span class="n">i_RS</span><span class="p">,</span>  <span class="c1"># == 0
</span>	<span class="n">v_R1</span> <span class="o">-</span> <span class="n">R1</span><span class="o">*</span><span class="n">i_R1</span><span class="p">,</span>  <span class="c1"># == 0
</span>	<span class="n">v_R2</span> <span class="o">-</span> <span class="n">R2</span><span class="o">*</span><span class="n">i_R2</span><span class="p">,</span>  <span class="c1"># == 0
</span>	<span class="n">v_R3</span> <span class="o">-</span> <span class="n">R3</span><span class="o">*</span><span class="n">i_R3</span><span class="p">,</span>  <span class="c1"># == 0
</span><span class="p">]</span>
</code></pre></div></div>

<p>The second circuit law we apply is Kirchhoff’s current law (KCL), which states that the sum of the current into a node must equal $0$.
Applying this to the upper-middle and upper-right nodes, we obtain the following $2$ equations:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">KCL</span> <span class="o">=</span> <span class="p">[</span>
	<span class="n">i_RS</span> <span class="o">-</span> <span class="n">i_R1</span> <span class="o">-</span> <span class="n">i_R2</span><span class="p">,</span>  <span class="c1"># == 0
</span>	<span class="n">i_R2</span> <span class="o">-</span> <span class="n">i_R3</span><span class="p">,</span>  <span class="c1"># == 0
</span><span class="p">]</span>
</code></pre></div></div>

<p>The third circuit law we apply is Kirchhoff’s voltage law (KVL), which states that the sum of the voltage around a closed loop must equal $0$.
Applying this to the left and right inner loops, we obtain the following $2$ equations:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">KVL</span> <span class="o">=</span> <span class="p">[</span>
	<span class="n">V_S</span> <span class="o">-</span> <span class="n">v_R1</span> <span class="o">-</span> <span class="n">v_RS</span><span class="p">,</span>  <span class="c1"># == 0
</span>	<span class="n">v_R1</span> <span class="o">-</span> <span class="n">v_R3</span> <span class="o">-</span> <span class="n">v_R2</span><span class="p">,</span> <span class="c1"># == 0
</span><span class="p">]</span>
</code></pre></div></div>

<p>Our collection of $8$ equations are independent because none can be derived from another.
They make a linear system of equations, which can be solved simultaneously as follows:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">viR_sol</span> <span class="o">=</span> <span class="n">sp</span><span class="p">.</span><span class="n">solve</span><span class="p">(</span><span class="n">Ohms_law</span> <span class="o">+</span> <span class="n">KCL</span> <span class="o">+</span> <span class="n">KVL</span><span class="p">,</span> <span class="n">viR_vars</span><span class="p">,</span> <span class="nb">dict</span><span class="o">=</span><span class="bp">True</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">viR_sol</span><span class="p">)</span>
</code></pre></div></div>

<p>::: {.output .execute_result execution_count=”11”}</p>
<pre><code class="language-{=latex}">$\displaystyle i_{R1} = \frac{V_{S} \left(R_{2} + R_{3}\right)}{R_{1} R_{2} + R_{1} R_{3} + R_{1} R_{S} + R_{2} R_{S} + R_{3} R_{S}}$
</code></pre>
<p>:::</p>

<p>::: {.output .execute_result execution_count=”11”}</p>
<pre><code class="language-{=latex}">$\displaystyle i_{R2} = \frac{R_{1} V_{S}}{R_{1} R_{2} + R_{1} R_{3} + R_{1} R_{S} + R_{2} R_{S} + R_{3} R_{S}}$
</code></pre>
<p>:::</p>

<p>::: {.output .execute_result execution_count=”11”}</p>
<pre><code class="language-{=latex}">$\displaystyle i_{R3} = \frac{R_{1} V_{S}}{R_{1} R_{2} + R_{1} R_{3} + R_{1} R_{S} + R_{2} R_{S} + R_{3} R_{S}}$
</code></pre>
<p>:::</p>

<p>::: {.output .execute_result execution_count=”11”}</p>
<pre><code class="language-{=latex}">$\displaystyle i_{RS} = \frac{V_{S} \left(R_{1} + R_{2} + R_{3}\right)}{R_{1} R_{2} + R_{1} R_{3} + R_{1} R_{S} + R_{2} R_{S} + R_{3} R_{S}}$
</code></pre>
<p>:::</p>

<p>::: {.output .execute_result execution_count=”11”}</p>
<pre><code class="language-{=latex}">$\displaystyle v_{R1} = \frac{R_{1} V_{S} \left(R_{2} + R_{3}\right)}{R_{1} R_{2} + R_{1} R_{3} + R_{1} R_{S} + R_{2} R_{S} + R_{3} R_{S}}$
</code></pre>
<p>:::</p>

<p>::: {.output .execute_result execution_count=”11”}</p>
<pre><code class="language-{=latex}">$\displaystyle v_{R2} = \frac{R_{1} R_{2} V_{S}}{R_{1} R_{2} + R_{1} R_{3} + R_{1} R_{S} + R_{2} R_{S} + R_{3} R_{S}}$
</code></pre>
<p>:::</p>

<p>::: {.output .execute_result execution_count=”11”}</p>
<pre><code class="language-{=latex}">$\displaystyle v_{R3} = \frac{R_{1} R_{3} V_{S}}{R_{1} R_{2} + R_{1} R_{3} + R_{1} R_{S} + R_{2} R_{S} + R_{3} R_{S}}$
</code></pre>
<p>:::</p>

<p>::: {.output .execute_result execution_count=”11”}</p>
<pre><code class="language-{=latex}">$\displaystyle v_{RS} = \frac{R_{S} V_{S} \left(R_{1} + R_{2} + R_{3}\right)}{R_{1} R_{2} + R_{1} R_{3} + R_{1} R_{S} + R_{2} R_{S} + R_{3} R_{S}}$
</code></pre>
<p>:::</p>

<h3 id="apply-the-requirement-constraints--">Apply the Requirement Constraints {-}</h3>

<p>The requirements that $v_{R_3} = V_{R_3}$ and $i_{R_1} = I_{R_1}$ can be encoded symbolically as two equations as follows:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">constraints</span> <span class="o">=</span> <span class="p">{</span><span class="n">v_R3</span><span class="p">:</span> <span class="n">V_R3</span><span class="p">,</span> <span class="n">i_R1</span><span class="p">:</span> <span class="n">I_R1</span><span class="p">}</span>  <span class="c1"># Design constraints
</span><span class="n">constraint_equations</span> <span class="o">=</span> <span class="p">[</span>
	<span class="n">sp</span><span class="p">.</span><span class="n">Eq</span><span class="p">(</span><span class="n">v_R3</span><span class="p">.</span><span class="n">subs</span><span class="p">(</span><span class="n">constraints</span><span class="p">),</span> <span class="n">v_R3</span><span class="p">.</span><span class="n">subs</span><span class="p">(</span><span class="n">viR_sol</span><span class="p">)),</span>
	<span class="n">sp</span><span class="p">.</span><span class="n">Eq</span><span class="p">(</span><span class="n">i_R1</span><span class="p">.</span><span class="n">subs</span><span class="p">(</span><span class="n">constraints</span><span class="p">),</span> <span class="n">i_R1</span><span class="p">.</span><span class="n">subs</span><span class="p">(</span><span class="n">viR_sol</span><span class="p">)),</span>
<span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">constraint_equations</span><span class="p">)</span>
</code></pre></div></div>

<p>::: {.output .execute_result execution_count=”13”}</p>
<pre><code class="language-{=latex}">$\displaystyle V_{R3} = \frac{R_{1} R_{3} V_{S}}{R_{1} R_{2} + R_{1} R_{3} + R_{1} R_{S} + R_{2} R_{S} + R_{3} R_{S}}$
</code></pre>
<p>:::</p>

<p>::: {.output .execute_result execution_count=”13”}</p>
<pre><code class="language-{=latex}">$\displaystyle I_{R1} = \frac{R_{2} V_{S} + R_{3} V_{S}}{R_{1} R_{2} + R_{1} R_{3} + R_{1} R_{S} + R_{2} R_{S} + R_{3} R_{S}}$
</code></pre>
<p>:::</p>

<h3 id="solve-for-resistances--">Solve for Resistances {-}</h3>

<p>The system of $2$ constraint equations and $3$ unkowns ($R_1$, $R_2$, and $R_3$) is underdetermined, which means there are infinite solutions.
The two equations can be solved for $R_1$ and $R_2$ in terms of $R_3$ and parameters as follows:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">constraints_sol</span> <span class="o">=</span> <span class="n">sp</span><span class="p">.</span><span class="n">solve</span><span class="p">(</span>
	<span class="n">constraint_equations</span><span class="p">,</span> <span class="p">[</span><span class="n">R1</span><span class="p">,</span> <span class="n">R2</span><span class="p">],</span> <span class="nb">dict</span><span class="o">=</span><span class="bp">True</span>
<span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">constraints_sol</span><span class="p">)</span>
</code></pre></div></div>

<p>::: {.output .execute_result execution_count=”15”}</p>
<pre><code class="language-{=latex}">$\displaystyle R_{1} = - R_{S} + \frac{V_{S}}{I_{R1}} - \frac{R_{S} V_{R3}}{I_{R1} R_{3}}$
</code></pre>
<p>:::</p>

<p>::: {.output .execute_result execution_count=”15”}</p>
<pre><code class="language-{=latex}">$\displaystyle R_{2} = \frac{- R_{3} \left(I_{R1} R_{S} + V_{R3} - V_{S}\right) - R_{S} V_{R3}}{V_{R3}}$
</code></pre>
<p>:::</p>

<h3 id="create-a-design-graph--">Create a Design Graph {-}</h3>

<p>Applying the design parameters and defining numerically evaluable functions for $R_1$ and $R_2$ as functions of $R_3$,</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">design_params</span> <span class="o">=</span> <span class="p">{</span><span class="n">V_S</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="n">R_S</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span> <span class="n">V_R3</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">I_R1</span><span class="p">:</span> <span class="mf">0.02</span><span class="p">}</span>
<span class="n">R1_fun</span> <span class="o">=</span> <span class="n">sp</span><span class="p">.</span><span class="n">lambdify</span><span class="p">(</span>
	<span class="p">[</span><span class="n">R3</span><span class="p">],</span>
	<span class="n">R1</span><span class="p">.</span><span class="n">subs</span><span class="p">(</span><span class="n">constraints_sol</span><span class="p">).</span><span class="n">subs</span><span class="p">(</span><span class="n">design_params</span><span class="p">),</span>
	<span class="n">modules</span><span class="o">=</span><span class="s">"numpy"</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">R2_fun</span> <span class="o">=</span> <span class="n">sp</span><span class="p">.</span><span class="n">lambdify</span><span class="p">(</span>
	<span class="p">[</span><span class="n">R3</span><span class="p">],</span>
	<span class="n">R2</span><span class="p">.</span><span class="n">subs</span><span class="p">(</span><span class="n">constraints_sol</span><span class="p">).</span><span class="n">subs</span><span class="p">(</span><span class="n">design_params</span><span class="p">),</span>
	<span class="n">modules</span><span class="o">=</span><span class="s">"numpy"</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div></div>

<p>And now we are ready to create the design graph, as follows:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">R3_</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">101</span><span class="p">)</span>  <span class="c1"># Values of $R_3$
</span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">R3_</span><span class="p">,</span> <span class="n">R1_fun</span><span class="p">(</span><span class="n">R3_</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="s">"$R_1$ ($</span><span class="se">\\</span><span class="s">Omega$)"</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">R3_</span><span class="p">,</span> <span class="n">R2_fun</span><span class="p">(</span><span class="n">R3_</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="s">"$R_2$ ($</span><span class="se">\\</span><span class="s">Omega$)"</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">"$R_3$ ($</span><span class="se">\\</span><span class="s">Omega$)"</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">ax</span><span class="p">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<p>::: {.output .execute_result execution_count=”18”}
<img src="source/ur/figure-0.pgf" alt="A design graph for resistors $R_1$, $R_2$, and $R_3$." />{#fig:ur-figure-0 .figure .pgf}
:::</p>

<p>:::
:::</p>

    </div>
  </div>
</div>

        <footer class="mdl-mega-footer">
  <div class="mdl-mega-footer__middle-section">
    
  </div>
  <div class="mdl-mega-footer__bottom-section">
    <ul class="mdl-mega-footer__link-list">
      
    </ul>
  </div>
</footer>

      </main>
    </div>
  </body>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KY4MZ8WFBC"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-KY4MZ8WFBC');
</script>
  <script src="/assets/js/versioning.js"></script>
<script src="/assets/js/heading-detailer.js"></script>
<!-- <script src="https://cdn.jsdelivr.net/npm/pseudocode@latest/build/pseudocode.min.js"> -->
</script>
<script>
  console.log("running algorithm");
  document.querySelectorAll("pre.algorithm").forEach(function(element) {
    console.log(element);  
    pseudocode.renderElement(element);
  });
</script>
<script src="/assets/js/mathjax_config.js" async></script>
</html>
